/*! For license information please see widget.min.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.RestauranteChatWidget=t():e.RestauranteChatWidget=t()}(this,()=>(()=>{"use strict";var e={56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},o=[],s=0;s<e.length;s++){var c=e[s],u=r.base?c[0]+r.base:c[0],l=i[u]||0,d="".concat(u," ").concat(l);i[u]=l+1;var h=n(d),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var f=a(p,r);r.byIndex=s,t.splice(s,0,{identifier:d,updater:f,references:1})}o.push(d)}return o}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var i=r(e=e||[],a=a||{});return function(e){e=e||[];for(var o=0;o<i.length;o++){var s=n(i[o]);t[s].references--}for(var c=r(e,a),u=0;u<i.length;u++){var l=n(i[u]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=c}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n}).join("")},t.i=function(e,n,r,a,i){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(o[c]=!0)}for(var u=0;u<e.length;u++){var l=[].concat(e[u]);r&&o[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),a&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=a):l[4]="".concat(a)),t.push(l))}},t}},365:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(601),a=n.n(r),i=n(314),o=n.n(i)()(a());o.push([e.id,"/**\n * ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n * RESTAURANT CHAT WIDGET - STYLES\n * CSS scoped with .restaurant-chat-* prefix to avoid conflicts\n * ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n */\n\n:root {\n  --widget-primary: #FF6B35;\n  --widget-primary-dark: #E55A2B;\n  --widget-bg: #FFFFFF;\n  --widget-text: #333333;\n  --widget-text-light: #666666;\n  --widget-border: #E0E0E0;\n  --widget-shadow: rgba(0, 0, 0, 0.1);\n  --widget-shadow-dark: rgba(0, 0, 0, 0.2);\n  --widget-success: #4CAF50;\n  --widget-error: #F44336;\n  --widget-bot-bg: #F5F5F5;\n  --widget-user-bg: var(--widget-primary);\n}\n\n/* Reset for widget elements */\n.restaurant-chat-widget *,\n.restaurant-chat-widget *::before,\n.restaurant-chat-widget *::after {\n  box-sizing: border-box;\n  margin: 0;\n  padding: 0;\n}\n\n/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n   FLOATING BUTTON\n   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */\n\n.restaurant-chat-button {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  width: 60px;\n  height: 60px;\n  border-radius: 50%;\n  background: var(--widget-primary);\n  box-shadow: 0 4px 12px var(--widget-shadow-dark);\n  cursor: pointer;\n  z-index: 9999;\n  transition: all 0.3s ease;\n  border: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n}\n\n.restaurant-chat-button:hover {\n  transform: scale(1.1);\n  background: var(--widget-primary-dark);\n}\n\n.restaurant-chat-button:focus {\n  outline: 2px solid var(--widget-primary);\n  outline-offset: 2px;\n}\n\n.restaurant-chat-button svg {\n  width: 28px;\n  height: 28px;\n  fill: white;\n  transition: transform 0.3s ease;\n}\n\n.restaurant-chat-button.open svg {\n  transform: rotate(180deg);\n}\n\n.restaurant-chat-button-badge {\n  position: absolute;\n  top: -5px;\n  right: -5px;\n  background: var(--widget-error);\n  color: white;\n  font-size: 12px;\n  font-weight: bold;\n  min-width: 20px;\n  height: 20px;\n  border-radius: 10px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0 6px;\n  opacity: 0;\n  transform: scale(0);\n  transition: all 0.3s ease;\n}\n\n.restaurant-chat-button-badge.visible {\n  opacity: 1;\n  transform: scale(1);\n}\n\n/* Position variants */\n.restaurant-chat-button.bottom-left {\n  right: auto;\n  left: 20px;\n}\n\n/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n   CHAT WINDOW\n   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */\n\n.restaurant-chat-window {\n  position: fixed;\n  bottom: 90px;\n  right: 20px;\n  width: 380px;\n  height: 600px;\n  max-height: calc(100vh - 110px);\n  background: var(--widget-bg);\n  border-radius: 12px;\n  box-shadow: 0 8px 24px var(--widget-shadow-dark);\n  display: none;\n  flex-direction: column;\n  z-index: 9998;\n  overflow: hidden;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n}\n\n.restaurant-chat-window.open {\n  display: flex;\n  animation: slideUp 0.3s ease;\n}\n\n.restaurant-chat-window.bottom-left {\n  right: auto;\n  left: 20px;\n}\n\n@keyframes slideUp {\n  from {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n@keyframes fadeIn {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n   CHAT HEADER\n   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */\n\n.restaurant-chat-header {\n  background: var(--widget-primary);\n  color: white;\n  padding: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  flex-shrink: 0;\n}\n\n.restaurant-chat-header-info {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.restaurant-chat-header-avatar {\n  width: 40px;\n  height: 40px;\n  border-radius: 50%;\n  background: rgba(255, 255, 255, 0.2);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 20px;\n}\n\n.restaurant-chat-header-text h3 {\n  font-size: 16px;\n  font-weight: 600;\n  margin: 0 0 2px 0;\n}\n\n.restaurant-chat-header-status {\n  font-size: 12px;\n  opacity: 0.9;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.restaurant-chat-header-status-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: var(--widget-success);\n}\n\n.restaurant-chat-header-status-dot.offline {\n  background: var(--widget-error);\n}\n\n.restaurant-chat-close-btn {\n  background: transparent;\n  border: none;\n  color: white;\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: background 0.2s ease;\n}\n\n.restaurant-chat-close-btn:hover {\n  background: rgba(255, 255, 255, 0.2);\n}\n\n.restaurant-chat-close-btn:focus {\n  outline: 2px solid white;\n  outline-offset: 2px;\n}\n\n.restaurant-chat-close-btn svg {\n  width: 18px;\n  height: 18px;\n  fill: currentColor;\n}\n\n/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n   MESSAGES AREA\n   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */\n\n.restaurant-chat-messages {\n  flex: 1;\n  overflow-y: auto;\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  background: #FAFAFA;\n}\n\n.restaurant-chat-messages::-webkit-scrollbar {\n  width: 6px;\n}\n\n.restaurant-chat-messages::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n.restaurant-chat-messages::-webkit-scrollbar-thumb {\n  background: var(--widget-border);\n  border-radius: 3px;\n}\n\n.restaurant-chat-messages::-webkit-scrollbar-thumb:hover {\n  background: #BDBDBD;\n}\n\n/* Message bubbles */\n.restaurant-chat-message {\n  max-width: 85%;\n  display: flex;\n  flex-direction: column;\n  animation: fadeIn 0.3s ease;\n}\n\n.restaurant-chat-message.bot {\n  align-self: flex-start;\n}\n\n.restaurant-chat-message.user {\n  align-self: flex-end;\n}\n\n.restaurant-chat-message-bubble {\n  padding: 12px 16px;\n  border-radius: 16px;\n  font-size: 14px;\n  line-height: 1.5;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n}\n\n.restaurant-chat-message.bot .restaurant-chat-message-bubble {\n  background: var(--widget-bg);\n  color: var(--widget-text);\n  border-bottom-left-radius: 4px;\n  box-shadow: 0 1px 2px var(--widget-shadow);\n}\n\n.restaurant-chat-message.user .restaurant-chat-message-bubble {\n  background: var(--widget-primary);\n  color: white;\n  border-bottom-right-radius: 4px;\n}\n\n.restaurant-chat-message-timestamp {\n  font-size: 11px;\n  color: var(--widget-text-light);\n  margin-top: 4px;\n  padding: 0 4px;\n}\n\n.restaurant-chat-message.user .restaurant-chat-message-timestamp {\n  text-align: right;\n}\n\n/* Typing indicator */\n.restaurant-chat-typing {\n  display: none;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 16px;\n  background: var(--widget-bg);\n  border-radius: 16px;\n  border-bottom-left-radius: 4px;\n  max-width: 80px;\n  box-shadow: 0 1px 2px var(--widget-shadow);\n}\n\n.restaurant-chat-typing.visible {\n  display: flex;\n}\n\n.restaurant-chat-typing-dots {\n  display: flex;\n  gap: 4px;\n}\n\n.restaurant-chat-typing-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  background: var(--widget-text-light);\n  animation: typingBounce 1.4s infinite ease-in-out;\n}\n\n.restaurant-chat-typing-dot:nth-child(1) {\n  animation-delay: 0s;\n}\n\n.restaurant-chat-typing-dot:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.restaurant-chat-typing-dot:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes typingBounce {\n  0%, 60%, 100% {\n    transform: translateY(0);\n  }\n  30% {\n    transform: translateY(-4px);\n  }\n}\n\n/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n   INPUT AREA\n   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */\n\n.restaurant-chat-input-area {\n  padding: 12px 16px;\n  background: var(--widget-bg);\n  border-top: 1px solid var(--widget-border);\n  display: flex;\n  gap: 8px;\n  align-items: flex-end;\n  flex-shrink: 0;\n}\n\n.restaurant-chat-input-wrapper {\n  flex: 1;\n  position: relative;\n}\n\n.restaurant-chat-input {\n  width: 100%;\n  padding: 12px 16px;\n  border: 1px solid var(--widget-border);\n  border-radius: 24px;\n  font-size: 14px;\n  font-family: inherit;\n  resize: none;\n  outline: none;\n  transition: border-color 0.2s ease, box-shadow 0.2s ease;\n  min-height: 44px;\n  max-height: 120px;\n  line-height: 1.4;\n}\n\n.restaurant-chat-input:focus {\n  border-color: var(--widget-primary);\n  box-shadow: 0 0 0 3px rgba(255, 107, 53, 0.1);\n}\n\n.restaurant-chat-input:disabled {\n  background: #F5F5F5;\n  cursor: not-allowed;\n  opacity: 0.7;\n}\n\n.restaurant-chat-input::placeholder {\n  color: var(--widget-text-light);\n}\n\n.restaurant-chat-send-btn {\n  width: 44px;\n  height: 44px;\n  border-radius: 50%;\n  background: var(--widget-primary);\n  border: none;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s ease;\n  flex-shrink: 0;\n}\n\n.restaurant-chat-send-btn:hover:not(:disabled) {\n  background: var(--widget-primary-dark);\n  transform: scale(1.05);\n}\n\n.restaurant-chat-send-btn:focus {\n  outline: 2px solid var(--widget-primary);\n  outline-offset: 2px;\n}\n\n.restaurant-chat-send-btn:disabled {\n  background: var(--widget-border);\n  cursor: not-allowed;\n}\n\n.restaurant-chat-send-btn svg {\n  width: 20px;\n  height: 20px;\n  fill: white;\n}\n\n/* Error message */\n.restaurant-chat-error {\n  display: none;\n  padding: 8px 12px;\n  background: #FFEBEE;\n  color: var(--widget-error);\n  font-size: 12px;\n  border-left: 3px solid var(--widget-error);\n  margin: 0 16px;\n  border-radius: 0 4px 4px 0;\n}\n\n.restaurant-chat-error.visible {\n  display: block;\n  animation: fadeIn 0.2s ease;\n}\n\n/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n   MOBILE RESPONSIVE\n   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */\n\n@media (max-width: 768px) {\n  .restaurant-chat-window {\n    bottom: 0;\n    right: 0;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    max-height: 100vh;\n    border-radius: 0;\n  }\n\n  .restaurant-chat-window.bottom-left {\n    left: 0;\n    right: 0;\n  }\n\n  .restaurant-chat-button {\n    bottom: 16px;\n    right: 16px;\n    width: 56px;\n    height: 56px;\n  }\n\n  .restaurant-chat-button.bottom-left {\n    right: auto;\n    left: 16px;\n  }\n\n  .restaurant-chat-button svg {\n    width: 24px;\n    height: 24px;\n  }\n\n  .restaurant-chat-header {\n    padding: 12px 16px;\n  }\n\n  .restaurant-chat-input-area {\n    padding: 10px 12px;\n  }\n\n  .restaurant-chat-messages {\n    padding: 12px;\n  }\n}\n\n/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n   ACCESSIBILITY\n   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */\n\n@media (prefers-reduced-motion: reduce) {\n  .restaurant-chat-window,\n  .restaurant-chat-button,\n  .restaurant-chat-message,\n  .restaurant-chat-typing-dot {\n    animation: none;\n    transition: none;\n  }\n}\n\n/* High contrast focus states */\n.restaurant-chat-button:focus-visible,\n.restaurant-chat-close-btn:focus-visible,\n.restaurant-chat-send-btn:focus-visible,\n.restaurant-chat-input:focus-visible {\n  outline: 3px solid var(--widget-primary);\n  outline-offset: 2px;\n}\n\n/* Screen reader only text */\n.restaurant-chat-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border: 0;\n}\n",""]);const s=o},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},601:e=>{e.exports=function(e){return e[1]}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0;var r={};n.d(r,{default:()=>H});var a=n(72),i=n.n(a),o=n(825),s=n.n(o),c=n(659),u=n.n(c),l=n(56),d=n.n(l),h=n(540),p=n.n(h),f=n(113),g=n.n(f),v=n(365),m={};function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function y(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return x(u,"_invoke",function(n,r,a){var i,s,c,u=0,l=a||[],d=!1,h={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function p(n,r){for(s=n,c=r,t=0;!d&&u&&!a&&t<l.length;t++){var a,i=l[t],p=h.p,f=i[2];n>3?(a=f===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((a=n<2&&p<i[1])?(s=0,h.v=r,h.n=i[1]):p<f&&(a=n<3||i[0]>r||r>f)&&(i[4]=n,i[5]=r,h.n=f,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,l,f){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,f),s=l,c=f;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),p(s,c)):h.n=c:h.v=c);try{if(u=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,i),!0),u}var o={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(x(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(l);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,x(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,x(d,"constructor",u),x(u,"constructor",c),c.displayName="GeneratorFunction",x(u,a,"GeneratorFunction"),x(d),x(d,a,"Generator"),x(d,r,function(){return this}),x(d,"toString",function(){return"[object Generator]"}),(y=function(){return{w:i,m:h}})()}function x(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}x=function(e,t,n,r){function i(t,n){x(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},x(e,t,n,r)}function w(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function S(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){w(i,r,a,o,s,"next",e)}function s(e){w(i,r,a,o,s,"throw",e)}o(void 0)})}}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function k(e){var t=function(e){if("object"!=b(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==b(t)?t:t+""}m.styleTagTransform=g(),m.setAttributes=d(),m.insert=u().bind(null,"head"),m.domAPI=s(),m.insertStyleElement=p(),i()(v.A,m),v.A&&v.A.locals&&v.A.locals;var I=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiUrl=t.replace(/\/$/,"")},t=[{key:"sendMessage",value:(a=S(y().m(function e(t,n){var r,a,i,o,s,c=arguments;return y().w(function(e){for(;;)switch(e.p=e.n){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:null,e.p=1,a={session_id:t,message:n},r&&(a.phone=r),e.n=2,fetch("".concat(this.apiUrl,"/chat/message"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return i=e.v,e.n=3,i.json();case 3:if(o=e.v,i.ok){e.n=4;break}return e.a(2,{success:!1,error:o.message||"Error al enviar mensaje"});case 4:return e.a(2,{success:!0,data:o.data});case 5:return e.p=5,s=e.v,console.error("ChatAPI.sendMessage error:",s),e.a(2,{success:!1,error:"Error de conexi√≥n. Intenta de nuevo."})}},e,this,[[1,5]])})),function(e,t){return a.apply(this,arguments)})},{key:"getSession",value:(r=S(y().m(function e(t){var n,r,a;return y().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("".concat(this.apiUrl,"/chat/session/").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}});case 1:return n=e.v,e.n=2,n.json();case 2:if(r=e.v,n.ok){e.n=3;break}return e.a(2,{success:!1,error:r.message||"Error al obtener sesi√≥n"});case 3:return e.a(2,{success:!0,data:r.data});case 4:return e.p=4,a=e.v,console.error("ChatAPI.getSession error:",a),e.a(2,{success:!1,error:"Error de conexi√≥n"})}},e,this,[[0,4]])})),function(e){return r.apply(this,arguments)})},{key:"resetSession",value:(n=S(y().m(function e(t){var n,r,a;return y().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,fetch("".concat(this.apiUrl,"/chat/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:t})});case 1:return n=e.v,e.n=2,n.json();case 2:if(r=e.v,n.ok){e.n=3;break}return e.a(2,{success:!1,error:r.message||"Error al resetear sesi√≥n"});case 3:return e.a(2,{success:!0,data:r.data});case 4:return e.p=4,a=e.v,console.error("ChatAPI.resetSession error:",a),e.a(2,{success:!1,error:"Error de conexi√≥n"})}},e,this,[[0,4]])})),function(e){return n.apply(this,arguments)})}],t&&E(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,a}(),T={0:{validation:null,placeholder:"Escribe cualquier cosa para comenzar...",errorMsg:null},1:{validation:function(e){return/^\d{10}$/.test(e)},placeholder:"Ingresa tu tel√©fono (10 d√≠gitos)...",errorMsg:"‚ö†Ô∏è Debe ser un tel√©fono de 10 d√≠gitos"},2:{validation:function(e){return/^[1-9]\d*$/.test(e)},placeholder:"Elige un n√∫mero...",errorMsg:"‚ö†Ô∏è Elige una opci√≥n v√°lida"},3:{validation:function(e){return/^[1-9]\d*$/.test(e)},placeholder:"Elige un n√∫mero...",errorMsg:"‚ö†Ô∏è Elige una opci√≥n v√°lida"},4:{validation:function(e){return/^[1-9]\d*$/.test(e)},placeholder:"Elige un n√∫mero...",errorMsg:"‚ö†Ô∏è Elige una opci√≥n v√°lida"},5:{validation:function(e){return/^[1-9]\d*$/.test(e)&&parseInt(e,10)<=20},placeholder:"Cantidad (1-20)...",errorMsg:"‚ö†Ô∏è Cantidad entre 1 y 20"},6:{validation:null,placeholder:"Instrucciones especiales o 'no'...",errorMsg:null},7:{validation:function(e){return["si","s√≠","no"].includes(e.toLowerCase().trim())},placeholder:"Escribe 'si' o 'no'...",errorMsg:"‚ö†Ô∏è Responde 'si' o 'no'"},8:{validation:function(e){return["si","s√≠","no"].includes(e.toLowerCase().trim())},placeholder:"Escribe 'si' o 'no'...",errorMsg:"‚ö†Ô∏è Responde 'si' o 'no'"},9:{validation:function(e){return e.trim().length>=10},placeholder:"Escribe tu direcci√≥n completa...",errorMsg:"‚ö†Ô∏è Direcci√≥n muy corta (m√≠nimo 10 caracteres)"},10:{validation:null,placeholder:"Referencias de ubicaci√≥n...",errorMsg:null},11:{validation:function(e){return["1","2","3","4"].includes(e.trim())},placeholder:"Elige 1, 2, 3 o 4...",errorMsg:"‚ö†Ô∏è Opci√≥n inv√°lida"},12:{validation:function(e){return["si","s√≠","no"].includes(e.toLowerCase().trim())},placeholder:"Escribe 'si' o 'no'...",errorMsg:"‚ö†Ô∏è Responde 'si' o 'no'"},13:{validation:null,placeholder:"",readonly:!0,errorMsg:null},14:{validation:null,placeholder:"Escribe tu mensaje...",errorMsg:null},15:{validation:null,placeholder:"Escribe tu mensaje...",errorMsg:null}};function M(e,t){var n=T[e];if(!n)return{valid:!0,errorMsg:null};if(!n.validation)return{valid:!0,errorMsg:null};var r=n.validation(t);return{valid:r,errorMsg:r?null:n.errorMsg}}function C(e){var t=T[e];return t?t.placeholder:"Escribe tu mensaje..."}function L(e){var t=T[e];return!!t&&!!t.readonly}function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function j(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function i(n,r,a,i){var c=r&&r.prototype instanceof s?r:s,u=Object.create(c.prototype);return A(u,"_invoke",function(n,r,a){var i,s,c,u=0,l=a||[],d=!1,h={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return i=t,s=0,c=e,h.n=n,o}};function p(n,r){for(s=n,c=r,t=0;!d&&u&&!a&&t<l.length;t++){var a,i=l[t],p=h.p,f=i[2];n>3?(a=f===r)&&(c=i[(s=i[4])?5:(s=3,3)],i[4]=i[5]=e):i[0]<=p&&((a=n<2&&p<i[1])?(s=0,h.v=r,h.n=i[1]):p<f&&(a=n<3||i[0]>r||r>f)&&(i[4]=n,i[5]=r,h.n=f,s=0))}if(a||n>1)return o;throw d=!0,r}return function(a,l,f){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,f),s=l,c=f;(t=s<2?e:c)||!d;){i||(s?s<3?(s>1&&(h.n=-1),p(s,c)):h.n=c:h.v=c);try{if(u=2,i){if(s||(a="next"),t=i[a]){if(!(t=t.call(i,c)))throw TypeError("iterator result is not an object");if(!t.done)return t;c=t.value,s<2&&(s=0)}else 1===s&&(t=i.return)&&t.call(i),s<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),s=1);i=e}else if((t=(d=h.n<0)?c:n.call(r,h))!==o)break}catch(t){i=e,s=1,c=t}finally{u=1}}return{value:t,done:d}}}(n,a,i),!0),u}var o={};function s(){}function c(){}function u(){}t=Object.getPrototypeOf;var l=[][r]?t(t([][r]())):(A(t={},r,function(){return this}),t),d=u.prototype=s.prototype=Object.create(l);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,A(e,a,"GeneratorFunction")),e.prototype=Object.create(d),e}return c.prototype=u,A(d,"constructor",u),A(u,"constructor",c),c.displayName="GeneratorFunction",A(u,a,"GeneratorFunction"),A(d),A(d,a,"Generator"),A(d,r,function(){return this}),A(d,"toString",function(){return"[object Generator]"}),(j=function(){return{w:i,m:h}})()}function A(e,t,n,r){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}A=function(e,t,n,r){function i(t,n){A(e,t,function(e){return this._invoke(t,n,e)})}t?a?a(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},A(e,t,n,r)}function P(e,t,n,r,a,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,a)}function _(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(e){P(i,r,a,o,s,"next",e)}function s(e){P(i,r,a,o,s,"throw",e)}o(void 0)})}}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B(r.key),r)}}function B(e){var t=function(e){if("object"!=O(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==O(t)?t:t+""}var F={SESSION_ID:"widget_session_id",PHONE:"widget_phone",CURRENT_LEVEL:"widget_current_level",CONVERSATION_HISTORY:"widget_conversation_history",LAST_ACTIVITY:"widget_last_activity"},R={es:"hola",en:"hello"},U=function(){return e=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config={apiUrl:t.apiUrl||"http://localhost:4000/api",restaurantName:t.restaurantName||"Restaurante",primaryColor:t.primaryColor||"#FF6B35",position:t.position||"bottom-right",welcomeMessage:t.welcomeMessage||null,buttonIcon:t.buttonIcon||null,locale:t.locale||"es"},this.sessionId=null,this.currentLevel=0,this.isOpen=!1,this.phone=null,this.isLoading=!1,this.conversationHistory=[],this.unreadCount=0,this.api=new I(this.config.apiUrl),this.elements={},this.init()},t=[{key:"init",value:function(){this.loadSession(),this.createWidget(),this.attachEventListeners(),this.applyCustomColors(),0===this.conversationHistory.length?this.showWelcomeMessage():this.renderConversationHistory()}},{key:"loadSession",value:function(){try{var e=localStorage.getItem(F.LAST_ACTIVITY);if(e&&Date.now()-parseInt(e,10)>864e5)return void this.clearSession();this.sessionId=localStorage.getItem(F.SESSION_ID)||this.generateUUID(),this.currentLevel=parseInt(localStorage.getItem(F.CURRENT_LEVEL)||"0",10),this.phone=localStorage.getItem(F.PHONE)||null;var t=localStorage.getItem(F.CONVERSATION_HISTORY);t&&(this.conversationHistory=JSON.parse(t)),localStorage.setItem(F.SESSION_ID,this.sessionId),this.updateLastActivity()}catch(e){console.error("Error loading session:",e),this.clearSession()}}},{key:"saveSession",value:function(){try{localStorage.setItem(F.SESSION_ID,this.sessionId),localStorage.setItem(F.CURRENT_LEVEL,String(this.currentLevel)),localStorage.setItem(F.CONVERSATION_HISTORY,JSON.stringify(this.conversationHistory)),this.phone&&localStorage.setItem(F.PHONE,this.phone),this.updateLastActivity()}catch(e){console.error("Error saving session:",e)}}},{key:"updateLastActivity",value:function(){localStorage.setItem(F.LAST_ACTIVITY,String(Date.now()))}},{key:"clearSession",value:function(){Object.values(F).forEach(function(e){localStorage.removeItem(e)}),this.sessionId=this.generateUUID(),this.currentLevel=0,this.phone=null,this.conversationHistory=[],localStorage.setItem(F.SESSION_ID,this.sessionId)}},{key:"generateUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},{key:"createWidget",value:function(){var e=document.createElement("div");e.className="restaurant-chat-widget",e.setAttribute("role","region"),e.setAttribute("aria-label","Chat de pedidos");var t="bottom-left"===this.config.position?"bottom-left":"";e.innerHTML='\n      \x3c!-- Floating Button --\x3e\n      <button class="restaurant-chat-button '.concat(t,'" \n              aria-label="Abrir chat" \n              aria-expanded="false"\n              aria-controls="restaurant-chat-window">\n        <span class="restaurant-chat-button-badge" aria-live="polite"></span>\n        <svg viewBox="0 0 24 24" aria-hidden="true">\n          <path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"/>\n        </svg>\n      </button>\n\n      \x3c!-- Chat Window --\x3e\n      <div id="restaurant-chat-window" \n           class="restaurant-chat-window ').concat(t,'" \n           role="dialog" \n           aria-labelledby="restaurant-chat-title"\n           aria-modal="true">\n        \n        \x3c!-- Header --\x3e\n        <div class="restaurant-chat-header">\n          <div class="restaurant-chat-header-info">\n            <div class="restaurant-chat-header-avatar">üçΩÔ∏è</div>\n            <div class="restaurant-chat-header-text">\n              <h3 id="restaurant-chat-title">').concat(this.escapeHtml(this.config.restaurantName),'</h3>\n              <div class="restaurant-chat-header-status">\n                <span class="restaurant-chat-header-status-dot"></span>\n                <span>En l√≠nea</span>\n              </div>\n            </div>\n          </div>\n          <button class="restaurant-chat-close-btn" aria-label="Cerrar chat">\n            <svg viewBox="0 0 24 24" aria-hidden="true">\n              <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>\n            </svg>\n          </button>\n        </div>\n\n        \x3c!-- Messages Area --\x3e\n        <div class="restaurant-chat-messages" \n             role="log" \n             aria-live="polite" \n             aria-label="Mensajes del chat">\n          \x3c!-- Typing indicator --\x3e\n          <div class="restaurant-chat-typing" aria-label="Escribiendo...">\n            <div class="restaurant-chat-typing-dots">\n              <span class="restaurant-chat-typing-dot"></span>\n              <span class="restaurant-chat-typing-dot"></span>\n              <span class="restaurant-chat-typing-dot"></span>\n            </div>\n          </div>\n        </div>\n\n        \x3c!-- Error message --\x3e\n        <div class="restaurant-chat-error" role="alert"></div>\n\n        \x3c!-- Input Area --\x3e\n        <div class="restaurant-chat-input-area">\n          <div class="restaurant-chat-input-wrapper">\n            <textarea class="restaurant-chat-input" \n                      rows="1"\n                      placeholder="').concat(C(this.currentLevel),'"\n                      aria-label="Escribe tu mensaje"></textarea>\n          </div>\n          <button class="restaurant-chat-send-btn" aria-label="Enviar mensaje">\n            <svg viewBox="0 0 24 24" aria-hidden="true">\n              <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>\n            </svg>\n          </button>\n        </div>\n      </div>\n    '),document.body.appendChild(e),this.elements={container:e,button:e.querySelector(".restaurant-chat-button"),badge:e.querySelector(".restaurant-chat-button-badge"),window:e.querySelector(".restaurant-chat-window"),closeBtn:e.querySelector(".restaurant-chat-close-btn"),messages:e.querySelector(".restaurant-chat-messages"),typing:e.querySelector(".restaurant-chat-typing"),error:e.querySelector(".restaurant-chat-error"),input:e.querySelector(".restaurant-chat-input"),sendBtn:e.querySelector(".restaurant-chat-send-btn"),statusDot:e.querySelector(".restaurant-chat-header-status-dot")}}},{key:"applyCustomColors",value:function(){if(this.config.primaryColor){var e=document.documentElement;e.style.setProperty("--widget-primary",this.config.primaryColor);var t=this.adjustColor(this.config.primaryColor,-20);e.style.setProperty("--widget-primary-dark",t)}}},{key:"adjustColor",value:function(e,t){var n=e.replace("#",""),r=parseInt(n,16),a=(r>>16)+t,i=(r>>8&255)+t,o=(255&r)+t;return"#"+((1<<24)+((a=Math.max(0,Math.min(255,a)))<<16)+((i=Math.max(0,Math.min(255,i)))<<8)+(o=Math.max(0,Math.min(255,o)))).toString(16).slice(1)}},{key:"attachEventListeners",value:function(){var e=this;this.elements.button.addEventListener("click",function(){return e.toggle()}),this.elements.closeBtn.addEventListener("click",function(){return e.close()}),this.elements.sendBtn.addEventListener("click",function(){return e.sendMessage()}),this.elements.input.addEventListener("keydown",function(t){"Enter"!==t.key||t.shiftKey||(t.preventDefault(),e.sendMessage())}),this.elements.input.addEventListener("input",function(){e.autoResizeInput()}),document.addEventListener("keydown",function(t){"Escape"===t.key&&e.isOpen&&e.close()}),document.addEventListener("click",function(t){e.isOpen&&!e.elements.window.contains(t.target)&&e.elements.button.contains(t.target)})}},{key:"autoResizeInput",value:function(){var e=this.elements.input;e.style.height="auto",e.style.height=Math.min(e.scrollHeight,120)+"px"}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"open",value:function(){this.isOpen=!0,this.elements.window.classList.add("open"),this.elements.button.classList.add("open"),this.elements.button.setAttribute("aria-expanded","true"),this.elements.input.focus(),this.scrollToBottom(),this.clearUnreadCount()}},{key:"close",value:function(){this.isOpen=!1,this.elements.window.classList.remove("open"),this.elements.button.classList.remove("open"),this.elements.button.setAttribute("aria-expanded","false")}},{key:"showWelcomeMessage",value:(a=_(j().m(function e(){var t,n,r;return j().w(function(e){for(;;)switch(e.n){case 0:return this.showTypingIndicator(),t=R[this.config.locale]||R.es,e.n=1,this.api.sendMessage(this.sessionId,t,this.phone);case 1:n=e.v,this.hideTypingIndicator(),n.success&&n.data?(this.currentLevel=n.data.current_level||0,this.addMessageToUI("bot",n.data.message),this.saveSession()):(r=this.config.welcomeMessage||"üëã ¬°Bienvenido! Estoy aqu√≠ para ayudarte con tu pedido. ¬øEn qu√© puedo ayudarte?",this.addMessageToUI("bot",r)),this.updatePlaceholder();case 2:return e.a(2)}},e,this)})),function(){return a.apply(this,arguments)})},{key:"sendMessage",value:(r=_(j().m(function e(){var t,n,r,a=this;return j().w(function(e){for(;;)switch(e.n){case 0:if((t=this.elements.input.value.trim())&&!this.isLoading){e.n=1;break}return e.a(2);case 1:if(!L(this.currentLevel)){e.n=2;break}return e.a(2);case 2:if((n=M(this.currentLevel,t)).valid){e.n=3;break}return this.showError(n.errorMsg),e.a(2);case 3:return this.hideError(),this.addMessageToUI("user",t),this.elements.input.value="",this.autoResizeInput(),this.setLoading(!0),this.showTypingIndicator(),1===this.currentLevel&&/^\d{10}$/.test(t)&&(this.phone=t),e.n=4,this.api.sendMessage(this.sessionId,t,this.phone);case 4:r=e.v,this.hideTypingIndicator(),this.setLoading(!1),r.success&&r.data?(this.currentLevel=r.data.current_level||this.currentLevel,this.addMessageToUI("bot",r.data.message),this.saveSession(),this.updatePlaceholder(),13===this.currentLevel&&setTimeout(function(){a.clearSession()},6e4)):this.showError(r.error||"Error al procesar tu mensaje");case 5:return e.a(2)}},e,this)})),function(){return r.apply(this,arguments)})},{key:"addMessageToUI",value:function(e,t){var n=(new Date).toISOString();this.conversationHistory.push({role:e,message:t,timestamp:n});var r=this.createMessageElement(e,t,n);this.elements.messages.insertBefore(r,this.elements.typing),this.scrollToBottom(),this.isOpen||"bot"!==e||this.incrementUnreadCount()}},{key:"createMessageElement",value:function(e,t,n){var r=document.createElement("div");r.className="restaurant-chat-message ".concat(e);var a=new Date(n).toLocaleTimeString("es-MX",{hour:"2-digit",minute:"2-digit"});return r.innerHTML='\n      <div class="restaurant-chat-message-bubble">'.concat(this.formatMessage(t),'</div>\n      <div class="restaurant-chat-message-timestamp">').concat(a,"</div>\n    "),r}},{key:"formatMessage",value:function(e){var t=this.escapeHtml(e);return t.replace(/\n/g,"<br>")}},{key:"escapeHtml",value:function(e){var t=document.createElement("div");return t.textContent=e,t.innerHTML}},{key:"renderConversationHistory",value:function(){var e=this;this.conversationHistory.forEach(function(t){var n=t.role,r=t.message,a=t.timestamp,i=e.createMessageElement(n,r,a);e.elements.messages.insertBefore(i,e.elements.typing)}),this.scrollToBottom(),this.updatePlaceholder()}},{key:"scrollToBottom",value:function(){var e=this;requestAnimationFrame(function(){e.elements.messages.scrollTop=e.elements.messages.scrollHeight})}},{key:"showTypingIndicator",value:function(){this.elements.typing.classList.add("visible"),this.scrollToBottom()}},{key:"hideTypingIndicator",value:function(){this.elements.typing.classList.remove("visible")}},{key:"setLoading",value:function(e){this.isLoading=e,this.elements.input.disabled=e,this.elements.sendBtn.disabled=e}},{key:"updatePlaceholder",value:function(){this.elements.input.placeholder=C(this.currentLevel),L(this.currentLevel)?(this.elements.input.disabled=!0,this.elements.sendBtn.disabled=!0):(this.elements.input.disabled=this.isLoading,this.elements.sendBtn.disabled=this.isLoading)}},{key:"showError",value:function(e){var t=this;this.elements.error.textContent=e,this.elements.error.classList.add("visible"),setTimeout(function(){t.hideError()},5e3)}},{key:"hideError",value:function(){this.elements.error.classList.remove("visible")}},{key:"incrementUnreadCount",value:function(){this.unreadCount++,this.updateBadge()}},{key:"clearUnreadCount",value:function(){this.unreadCount=0,this.updateBadge()}},{key:"updateBadge",value:function(){this.unreadCount>0?(this.elements.badge.textContent=this.unreadCount>9?"9+":String(this.unreadCount),this.elements.badge.classList.add("visible")):this.elements.badge.classList.remove("visible")}},{key:"setConnectionStatus",value:function(e){e?this.elements.statusDot.classList.remove("offline"):this.elements.statusDot.classList.add("offline")}},{key:"resetSession",value:(n=_(j().m(function e(){return j().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.api.resetSession(this.sessionId);case 1:this.clearSession(),this.elements.messages.querySelectorAll(".restaurant-chat-message").forEach(function(e){return e.remove()}),this.showWelcomeMessage();case 2:return e.a(2)}},e,this)})),function(){return n.apply(this,arguments)})},{key:"destroy",value:function(){this.elements.container&&this.elements.container.remove()}}],t&&N(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,a}();const H=U;return"undefined"!=typeof window&&(window.RestauranteChatWidget=U),r.default})());